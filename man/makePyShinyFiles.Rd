% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/makePyShinyFiles.R
\name{makePyShinyFiles}
\alias{makePyShinyFiles}
\title{Generate Data Files for pyShinyCell Shiny App}
\usage{
makePyShinyFiles(
  obj,
  scConf,
  gex.assay = NA,
  gex.slot = c("data", "scale.data", "counts"),
  gene.mapping = TRUE,
  shiny.prefix = "sc1",
  shiny.dir = "shinyApp/",
  default.gene1 = NA,
  default.gene2 = NA,
  default.multigene = NA,
  default.dimred = NA,
  generate_h5ad = TRUE,
  compress_h5ad = TRUE,
  remove_assays = NULL,
  calculate_maxlvl = TRUE,
  chunkSize = 500,
  verbose = TRUE
)
}
\arguments{
\item{obj}{input single-cell object for Seurat (v3+) / SingleCellExperiment
data or input file path for h5ad / loom files}

\item{scConf}{shinycell config data.table (created by createConfig() or
createPyConfig())}

\item{gex.assay}{assay in single-cell data object to use for plotting
gene expression. Defaults to "RNA" for Seurat, "logcounts" for SCE.}

\item{gex.slot}{slot in single-cell assay to plot. Only used for Seurat
objects. Default is "data".}

\item{gene.mapping}{specifies whether to convert Ensembl gene IDs to gene
symbols. Set to TRUE for automatic conversion, or provide a named vector
for custom mapping. Default is FALSE.}

\item{shiny.prefix}{specify file prefix for generated files. Default is "sc1".}

\item{shiny.dir}{specify directory to create the Shiny app in. Default is
"shinyApp/".}

\item{default.gene1}{specify primary default gene to show}

\item{default.gene2}{specify secondary default gene to show}

\item{default.multigene}{character vector specifying default genes to show
in multi-gene plots (bubble plot / heatmap)}

\item{default.dimred}{character vector specifying the two default dimension
reductions. Default is to use UMAP if available, otherwise TSNE.}

\item{generate_h5ad}{Logical. If TRUE (default) and obj is a Seurat object,
generates H5AD file for Python analysis. Set to FALSE if working with
h5ad/loom inputs that are already in correct format.}

\item{compress_h5ad}{Logical. If TRUE (default), applies gzip compression
to generated H5AD file. Requires Python environment with scanpy.}

\item{remove_assays}{Character vector. Names of Seurat assays to remove
before H5AD conversion to reduce file size. E.g. c("integrated", "SCT").}

\item{calculate_maxlvl}{Logical. If TRUE (default), calculates and saves
maximum expression levels per gene to maxlvl.rds for efficient visualization.
Requires Python with scipy for H5AD files.}

\item{chunkSize}{number of genes written to h5file at any one time. Lower
this number to reduce memory consumption. Default is 500.}

\item{verbose}{Logical. If TRUE (default), prints status messages.}
}
\value{
Invisibly returns a list with paths to generated files:
  - conf: Path to config RDS
  - meta: Path to metadata RDS
  - gene: Path to gene mapping RDS
  - gexpr: Path to gene expression file (H5 or H5AD)
  - def: Path to defaults RDS
  - maxlvl: Path to max levels RDS (if generate_h5ad=TRUE)
}
\description{
Extended version of ShinyCell::makeShinyFiles() that generates all required
data files for a pyShinyCell application, including H5AD format for Python
analysis integration and maximum expression level calculations.
}
\details{
This function generates the following files in \code{shiny.dir}:
- `PREFIXconf.rds`: Configuration data table
- `PREFIXmeta.rds`: Cell metadata
- `PREFIXgene.rds`: Gene mapping
- `PREFIXgexpr.h5`: Gene expression matrix (HDF5)
- `PREFIXdef.rds`: Default plot settings
- `PREFIXgexpr.h5ad`: Gene expression (H5AD, if `generate_h5ad = TRUE`)
- `PREFIXmaxlvl.rds`: Max expression per gene (if `calculate_maxlvl = TRUE`)

The H5AD file enables direct Python analysis access using scanpy or gseapy.
}
\section{Workflow}{

1. Calls ShinyCell::makeShinyFiles() to generate standard files
2. If generating H5AD: converts Seurat object to H5AD with gzip compression
3. If calculating maxlvl: computes max expression for each gene from H5AD
4. Generates defaults RDS file with standard plot settings
}

\examples{
# This is typically called internally or requires setup.

}
